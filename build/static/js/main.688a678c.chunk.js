(this.webpackJsonpteste2=this.webpackJsonpteste2||[]).push([[0],{1:function(e,t){e.exports={checkCPF:function(e){var t,a,n;t=e.toString().substr(0,9),a=10,n=0;var r=!0,l=!1,c=void 0;try{for(var i,o=t[Symbol.iterator]();!(r=(i=o.next()).done);r=!0){n+=i.value*a,a--}}catch(v){l=!0,c=v}finally{try{r||null==o.return||o.return()}finally{if(l)throw c}}if((n=10*n%11)>9&&(n=0),n!=e.toString().charAt(9))return!1;t=e.toString().substr(0,10),a=11,n=0;var u=!0,m=!1,s=void 0;try{for(var d,f=t[Symbol.iterator]();!(u=(d=f.next()).done);u=!0){n+=d.value*a,a--}}catch(v){m=!0,s=v}finally{try{u||null==f.return||f.return()}finally{if(m)throw s}}return(n=10*n%11)>9&&(n=0),n==e.toString().charAt(10)},formatCPF:function(e){return(e=e.toString()).substring(0,3)+"."+e.substring(3,6)+"."+e.substring(6,9)+"-"+e.substring(9,11)},formatUSD:new Intl.NumberFormat("en-US",{style:"currency",currency:"USD",minimumFractionDigits:2}),makePath:function(e,t){switch(t){case"back":return"http://localhost:3001/api/"+e.join("/");case"front":default:return"http://localhost:3000/"+e.join("/")}}}},10:function(e,t,a){},22:function(e,t,a){e.exports=a(54)},31:function(e,t,a){},48:function(e,t,a){},49:function(e,t,a){},50:function(e,t,a){},51:function(e,t,a){},52:function(e,t,a){},53:function(e,t,a){},54:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),l=a(21),c=a.n(l),i=a(6),o=a(1),u=function(e){return r.a.createElement("li",{key:e.keyItem,className:"nav-item"},r.a.createElement("a",{href:Object(o.makePath)([e.link])},e.icon&&r.a.createElement(i.a,{className:"nav-icon",icon:e.icon}),r.a.createElement("span",{className:"nav-span"},e.name)))},m=(a(31),function(){return r.a.createElement("nav",{className:"nav-bar"},r.a.createElement("ul",{className:"nav-ul"},[{name:"Home",link:"",icon:"home"},{name:"Products",link:"product",icon:"shopping-bag"},{name:"Customers",link:"customer",icon:"user"},{name:"Sales",link:"sale",icon:"dollar-sign"}].map((function(e,t){return r.a.createElement(u,{key:t,name:e.name,link:e.link,icon:e.icon})}))))}),s=a(2),d=a(3),f=a.n(d),v=(a(48),function(e){var t=Object(n.useState)(""),a=Object(s.a)(t,2),l=a[0],c=a[1];return r.a.createElement("div",{className:"input-main"+(e.divClass?" "+e.divClass:"")+l},e.label&&r.a.createElement("label",{className:"input-label",htmlFor:e.id},e.label),r.a.createElement("input",{id:e.id,type:e.type,name:e.name,min:"number"===e.type?e.min:"",max:"number"===e.type?e.max:"",minLength:"text"===e.type?e.min:"",maxLength:"text"===e.type?e.max:"",value:e.value,readOnly:e.view,className:"input-input"+(e.inputClass?" "+e.inputClass:"")+(e.view?" read-only":""),placeholder:e.placeHolder,onBlur:function(t){e.view||c(""),e.onBlur&&e.onBlur(t)},onFocus:function(t){e.view||c(" input-active"),e.onFocus&&e.onFocus(t)},onChange:function(t){e.onChange&&e.onChange(t)}}))}),p=(a(49),function(e){return r.a.createElement("div",{className:"button-main"+(e.divClass?" "+e.divClass:"")},r.a.createElement("button",{type:e.submit?"submit":"button",className:"button-button "+e.color,onClick:function(t){return e.click(t)}},e.name,e.children))}),b=(a(50),function(e){var t=e.children,a=e.name,n=e.onSubmit,l=e.onCancel;return r.a.createElement("div",{className:"form-main"},r.a.createElement("div",{className:"form-header"},r.a.createElement("h2",null,a)),r.a.createElement("div",{className:"form-content"},t),r.a.createElement("div",{className:"form-footer"},r.a.createElement("div",{className:"form-buttons"},l&&r.a.createElement(p,{name:"Cancel",color:"red",click:function(e){return l(e)}}),n&&r.a.createElement(p,{name:"Confirm",color:"green",submit:"1",click:function(e){return n(e)}}))))}),h=function(){var e=Object(n.useState)([{id:"sku",name:"sku",label:"SKU",type:"text",min:"3",max:"20",placeHolder:"Product Identifier",value:"",onChange:function(e){return c(e)}},{id:"name",name:"name",label:"Name",type:"text",min:"3",max:"100",placeHolder:"Product Name",value:"",onChange:function(e){return c(e)}},{id:"price",name:"price",label:"Price",type:"number",min:"0",value:"",placeHolder:"Product Price",onChange:function(e){return c(e)}},{id:"min",name:"min",label:"Minimum Purchase Quantity",type:"number",min:"1",value:"",placeHolder:"Minimum Purchase Quantity",onChange:function(e){return c(e)}}]),t=Object(s.a)(e,2),a=t[0],l=t[1],c=function(e){var t=a.slice();t.map((function(a,n){a.id===e.target.id&&(t[n].value=e.target.value)})),l(t)},i=function(e){e.preventDefault();var t={};a.map((function(e){return t[e.name]=e.value}));var n,r=(n=t).sku.length<3||n.sku.length>20?{status:!1,msg:"Invalid SKU"}:n.name.length<3||n.name.length>50?{status:!1,msg:"Invalid Name"}:n.price<=0?{status:!1,msg:"Invalid Price"}:n.min!=parseInt(n.min)?{status:!1,msg:"Invalid Minimum Purchase Quantity"}:{status:!0};if(!r.status)return window.alert(r.msg),!1;f.a.post(Object(o.makePath)(["product","add"],"back"),t).then((function(e){200===e.status?e.data.status?(window.alert("Product successfully registered"),window.location.href=Object(o.makePath)(["product"])):window.alert(e.data.msg):window.alert("Connection Error")}))};return r.a.createElement(b,{name:"Product",onCancel:function(){return window.location.href=Object(o.makePath)(["product"])},onSubmit:function(e){return i(e)}},a.map((function(e){return r.a.createElement(v,{key:e.id,id:e.id,name:e.name,label:e.label,type:e.type,min:e.min,max:e.max,placeHolder:e.placeHolder,value:e.value,onBlur:e.onBlur,onChange:e.onChange})})))},w=function(e){var t=Object(n.useState)([{id:"sku",name:"sku",label:"SKU",type:"text",min:"3",max:"20",placeHolder:"Product Identifier",value:"",onChange:function(e){return i(e)}},{id:"name",name:"name",label:"Name",type:"text",min:"3",max:"100",placeHolder:"Product Name",value:"",onChange:function(e){return i(e)}},{id:"price",name:"price",label:"Price",type:"number",min:"0",value:"",placeHolder:"Product Price",onChange:function(e){return i(e)}},{id:"min",name:"min",label:"Minimum Purchase Quantity",type:"number",min:"1",value:"",placeHolder:"Minimum Purchase Quantity",onChange:function(e){return i(e)}}]),a=Object(s.a)(t,2),l=a[0],c=a[1];Object(n.useEffect)((function(){e.id?f.a.get(Object(o.makePath)(["product","search",e.id],"back")).then((function(e){if(200===e.status)if(e.data.sku){var t=l.slice();t.map((function(a,n){t[n].value=e.data[a.name]})),c(t)}else window.alert("Invalid Product"),window.location.href=Object(o.makePath)(["product"]);else window.alert("Connection Error"),window.location.href=Object(o.makePath)(["product"])})):(window.alert("Invalid Product"),window.location.href=Object(o.makePath)(["product"]))}),[]);var i=function(e){var t=l.slice();t.map((function(a,n){a.id===e.target.id&&(t[n].value=e.target.value)})),c(t)},u=function(t){t.preventDefault();var a={};l.map((function(e){return a[e.name]=e.value}));var n,r=(n=a).sku.length<3||n.sku.length>20?{status:!1,msg:"Invalid SKU"}:n.name.length<3||n.name.length>50?{status:!1,msg:"Invalid Name"}:n.price<=0?{status:!1,msg:"Invalid Price"}:n.min!=parseInt(n.min)?{status:!1,msg:"Invalid Minimum Purchase Quantity"}:{status:!0};if(!r.status)return window.alert(r.msg),!1;f.a.post(Object(o.makePath)(["product","edit",e.id],"back"),a).then((function(e){200===e.status?e.data.status?(window.alert("Product successfully updated"),window.location.href=Object(o.makePath)(["product"])):window.alert(e.data.msg):window.alert("Connection Error")}))};return r.a.createElement(b,{name:"Product",onCancel:function(){return window.location.href=Object(o.makePath)(["product"])},onSubmit:function(e){return u(e)}},l.map((function(e){return r.a.createElement(v,{key:e.id,id:e.id,name:e.name,label:e.label,type:e.type,min:e.min,max:e.max,placeHolder:e.placeHolder,value:e.value,onBlur:e.onBlur,onChange:e.onChange})})))},E=function(e){var t=Object(n.useState)([{id:"sku",name:"sku",label:"SKU",type:"text",placeHolder:"Product Identifier",value:""},{id:"name",name:"name",label:"Name",type:"text",placeHolder:"Product Name",value:""},{id:"price",name:"price",label:"Price",type:"number",value:"",placeHolder:"Product Price"},{id:"min",name:"min",label:"Minimum Purchase Quantity",type:"number",value:"",placeHolder:"Minimum Purchase Quantity"}]),a=Object(s.a)(t,2),l=a[0],c=a[1];return Object(n.useEffect)((function(){e.id?f.a.get(Object(o.makePath)(["product","search",e.id],"back")).then((function(e){if(200===e.status)if(e.data.sku){var t=l.slice();t.map((function(a,n){t[n].value=e.data[a.name]})),c(t)}else window.alert("Invalid Product"),window.location.href=Object(o.makePath)(["product"]);else window.alert("Connection Error"),window.location.href=Object(o.makePath)(["product"])})):(window.alert("Invalid Product"),window.location.href=Object(o.makePath)(["product"]))}),[]),r.a.createElement(b,{name:"Product",onSubmit:function(){return window.location.href=Object(o.makePath)(["product"])}},l.map((function(e){return r.a.createElement(v,{view:"1",key:e.id,id:e.id,name:e.name,label:e.label,type:e.type,placeHolder:e.placeHolder,value:e.value})})))},y=(a(51),function(e){var t=e.name,a=e.subName,n=e.url,l=e.id,c=e.onDelete;return r.a.createElement("li",{className:"listItem-main"},r.a.createElement("div",{className:"listItem-info"},r.a.createElement("span",null,t),r.a.createElement("span",null,a)),r.a.createElement("div",{className:"listItem-buttons"},r.a.createElement(p,{name:"View",color:"blue",click:function(){return window.location.href=Object(o.makePath)([n,"view",l])}}),r.a.createElement(p,{name:"Edit",color:"green",click:function(){return window.location.href=Object(o.makePath)([n,"edit",l])}}),r.a.createElement(p,{name:"Delete",color:"red",click:function(){return c(l)}})))}),g=function(){var e=Object(n.useState)([]),t=Object(s.a)(e,2),a=t[0],l=t[1];Object(n.useEffect)((function(){return c()}),[]);var c=function(){f.a.get(Object(o.makePath)(["product"],"back")).then((function(e){200===e.status&&l(e.data)}))};return r.a.createElement("div",{className:"list-main"},r.a.createElement("div",{className:"list-header"},r.a.createElement("h2",null,"Products"),r.a.createElement(p,{name:"New",color:"green",click:function(){return window.location.href=Object(o.makePath)(["product","add"])}})),r.a.createElement("div",{className:"list-content"},r.a.createElement("ul",null,a.map((function(e){return r.a.createElement(y,{key:e._id,name:e.name,subName:"SKU: "+e.sku,url:"product",id:e._id,onDelete:function(e){return function(e){window.confirm("Are you sure you want to delete this product?")&&f.a.delete(Object(o.makePath)(["product","delete",e],"back")).then((function(e){200===e.status&&c()}))}(e)}})})))))},k=function(e){switch(e.action){case"add":return r.a.createElement(h,null);case"edit":return r.a.createElement(w,{id:e.id});case"view":return r.a.createElement(E,{id:e.id});default:return r.a.createElement(g,null)}},P=(a(10),a(52),function(e){return r.a.createElement("div",{className:"select-main"+(e.divClass?" "+e.divClass:"")},r.a.createElement("div",{className:"select-header"},r.a.createElement("span",null,e.label)),r.a.createElement("div",{className:"select-content"},r.a.createElement("select",{readonly:e.view,value:e.value,name:e.name,onChange:function(t){return function(t){e.onChange&&e.onChange(t)}(t)},className:"select-select"+(e.className?" "+e.className:"")},e.options.map((function(e){return r.a.createElement("option",{key:e.value,value:e.value},e.name)})))))}),j=function(){var e=Object(n.useState)([]),t=Object(s.a)(e,2),a=t[0],l=t[1],c=Object(n.useState)([]),u=Object(s.a)(c,2),m=u[0],d=u[1],b=Object(n.useState)({}),h=Object(s.a)(b,2),w=h[0],E=h[1],y=Object(n.useState)({customer:"",total:0}),g=Object(s.a)(y,2),k=g[0],j=g[1],O=Object(n.useState)([{profitability:"none",product:"",price:"",qtd:""}]),C=Object(s.a)(O,2),N=C[0],S=C[1];Object(n.useEffect)((function(){var e=Object.assign({},k),t=0;N.forEach((function(e){["",0].includes(e.price)||["",0].includes(e.qtd)||(t+=e.price*e.qtd)})),e.total=t,j(e),a&&0!=a.length||(f.a.get(Object(o.makePath)(["customer"],"back")).then((function(e){if(200===e.status){var t=[{value:"",name:"None Selected"}];if(e.data){var a=!0,n=!1,r=void 0;try{for(var c,i=e.data[Symbol.iterator]();!(a=(c=i.next()).done);a=!0){var o=c.value;t.push({value:o._id,name:o.fname+" "+o.lname})}}catch(u){n=!0,r=u}finally{try{a||null==i.return||i.return()}finally{if(n)throw r}}}l(t)}})),f.a.get(Object(o.makePath)(["product"],"back")).then((function(e){if(200===e.status){var t=[{value:"",name:"None Selected"}],a={};if(e.data){var n=!0,r=!1,l=void 0;try{for(var c,i=e.data[Symbol.iterator]();!(n=(c=i.next()).done);n=!0){var o=c.value;t.push({value:o._id,name:o.name}),a[o._id]=o}}catch(u){r=!0,l=u}finally{try{n||null==i.return||i.return()}finally{if(r)throw l}}}E(a),d(t)}})))}),[N]);var x=function(e,t){if(e){var a=w[e].min,n=parseInt(t);if(n<a)return window.alert("Product "+w[e].name+" Has Invalid Quantity, Must be at least "+w[e].min),!1;if(n>0){var r=Math.ceil(n/a)*a;if(r!=n){var l=Math.floor(n/a)*a;return window.alert("Product "+w[e].name+" Has Invalid Quantity, try "+l+" or "+r),!1}}return!0}},I=function(e,t,a){var n=N.slice();if(""!=n[t].product){if(n[t][e]=a.target.value,"price"===e){var r=w[n[t].product].price,l=isNaN(a.target.value)?1:a.target.value;n[t].profitability=l>r?"great":l>=.9*r?"good":"bad"}S(n)}else window.alert("No Product Selected")};return r.a.createElement("div",{className:"sale-form-main form-main"},r.a.createElement("div",{className:"form-header"},r.a.createElement("h2",null,"Sale"),r.a.createElement("h4",null,"Total: ",o.formatUSD.format(k.total))),r.a.createElement("div",{className:"sale-form-content form-content"},r.a.createElement("div",null,r.a.createElement(P,{name:"customer",label:"Customer",value:k.customer,options:a,divClass:"form-content-1",onChange:function(e){return function(e){var t=Object.assign({},k);t.customer=e.target.value,j(t)}(e)}}),r.a.createElement(p,{name:"Add Product",color:"green",divClass:"form-content-2",click:function(){return function(){var e=N.slice();e.unshift({profitability:"none",product:"",price:"",qtd:""}),S(e)}()}})),r.a.createElement("div",{className:"sale-products"},N.map((function(e,t){return r.a.createElement("div",{key:t,className:"sale-item"},r.a.createElement("div",null,r.a.createElement("span",null,r.a.createElement("b",null,"Total:")," ",o.formatUSD.format(e.price*e.qtd)),r.a.createElement("span",null,r.a.createElement("b",null,"Min Qtd:")," ",function(e){return N[e]&&""!=N[e].product?w[N[e].product].min:"1"}(t)),r.a.createElement("div",null,r.a.createElement("span",null,r.a.createElement("b",null,"Profitability:")," "),r.a.createElement("span",{className:"proft "+e.profitability},e.profitability.toUpperCase()))),r.a.createElement(P,{name:"product",label:"Product",value:e.product,options:m,onChange:function(e){return function(e,t){var a=N.slice();a[e].product=t.target.value,a[e].price=w[t.target.value].price,a[e].qtd=w[t.target.value].min,a[e].profitability="good",S(a)}(t,e)}}),r.a.createElement(v,{type:"number",id:e.product,min:"0",name:"qtd",label:"Quantity",value:e.qtd,placeHolder:"Quantity",onBlur:function(e){return x(e.target.id,e.target.value)},onChange:function(e){return I("qtd",t,e)}}),r.a.createElement(v,{type:"number",id:"price"+t,min:"0",name:"price",label:"Sell Price",value:e.price,placeHolder:"Sell Price",onChange:function(e){return I("price",t,e)}}),r.a.createElement(p,{color:"red tiny",click:function(){return function(e){var t=N.slice();delete t[e],S(t)}(t)}},r.a.createElement(i.a,{className:"nav-icon",icon:"trash-alt"})))})))),r.a.createElement("div",{className:"form-footer"},r.a.createElement("div",{className:"form-buttons"},r.a.createElement(p,{name:"Cancel",color:"red",click:function(){return window.location.href=Object(o.makePath)(["sale"])}}),r.a.createElement(p,{name:"Confirm",color:"green",submit:"1",click:function(){return function(){var e={products:[]};if(k.customer.length<1)window.alert("Customer is required");else if(e.customer=k.customer,k.total<=0)window.alert("Sale Total must be greater than Zero");else if(N.length<1)window.alert("Sale must have at least one product");else{var t=!1,a=!0,n=!1,r=void 0;try{for(var l,c=N[Symbol.iterator]();!(a=(l=c.next()).done);a=!0){var i=l.value;if(i.product&&w[i.product]){if(isNaN(i.qtd)){window.alert("Product "+w[i.product].name+" Has Invalid Quantity, Must be at least "+w[i.product].min),t=!0;break}if(!["good","great"].includes(i.profitability)){window.alert("Product "+w[i.product].name+" Has Invalid Profitability, Increase the Sell Price"),t=!0;break}if(!x(i.product,i.qtd))break;e.products.push(i)}}}catch(u){n=!0,r=u}finally{try{a||null==c.return||c.return()}finally{if(n)throw r}}t||(e.products.length<1?window.alert("Sale must have at least one product"):f.a.post(Object(o.makePath)(["sale","add"],"back"),e).then((function(e){200===e.status?e.data.status?(window.alert("Sale successfully registered"),window.location.href=Object(o.makePath)(["sale"])):window.alert(e.data.msg):window.alert("Connection Error")})))}}()}}))))},O=function(e){var t=Object(n.useState)([]),a=Object(s.a)(t,2),l=a[0],c=a[1],u=Object(n.useState)([]),m=Object(s.a)(u,2),d=m[0],b=m[1],h=Object(n.useState)({}),w=Object(s.a)(h,2),E=w[0],y=w[1],g=Object(n.useState)({customer:"",total:0}),k=Object(s.a)(g,2),j=k[0],O=k[1],C=Object(n.useState)([{profitability:"none",product:"",price:"",qtd:""}]),N=Object(s.a)(C,2),S=N[0],x=N[1];Object(n.useEffect)((function(){var t=Object.assign({},j),a=0;S.forEach((function(e){["",0].includes(e.price)||["",0].includes(e.qtd)||(a+=e.price*e.qtd)})),t.total=a,O(t),l&&0!=l.length||(f.a.get(Object(o.makePath)(["customer"],"back")).then((function(e){if(200===e.status){var t=[{value:"",name:"None Selected"}];if(e.data){var a=!0,n=!1,r=void 0;try{for(var l,i=e.data[Symbol.iterator]();!(a=(l=i.next()).done);a=!0){var u=l.value;t.push({value:u._id,name:u.fname+" "+u.lname})}}catch(m){n=!0,r=m}finally{try{a||null==i.return||i.return()}finally{if(n)throw r}}c(t)}else window.alert("No Registered Customers"),window.location.href=Object(o.makePath)(["sale"])}else window.alert("No Registered Customers"),window.location.href=Object(o.makePath)(["sale"])})),f.a.get(Object(o.makePath)(["product"],"back")).then((function(t){if(200===t.status){var a=[{value:"",name:"None Selected"}],n={};if(t.data){var r=!0,l=!1,c=void 0;try{for(var i,u=t.data[Symbol.iterator]();!(r=(i=u.next()).done);r=!0){var m=i.value;a.push({value:m._id,name:m.name}),n[m._id]=m}}catch(s){l=!0,c=s}finally{try{r||null==u.return||u.return()}finally{if(l)throw c}}y(n),b(a),e.id?f.a.get(Object(o.makePath)(["sale","search",e.id],"back")).then((function(e){200===e.status?e.data.customer?(O({customer:e.data.customer,total:e.data.total}),x(e.data.products)):(window.alert("Invalid Sale"),window.location.href=Object(o.makePath)(["sale"])):(window.alert("Connection Error"),window.location.href=Object(o.makePath)(["sale"]))})):(window.alert("Invalid Sale"),window.location.href=Object(o.makePath)(["sale"]))}else window.alert("No Registered Products"),window.location.href=Object(o.makePath)(["sale"])}else window.alert("No Registered Products"),window.location.href=Object(o.makePath)(["sale"])})))}),[S]);var I=function(e,t){if(e){var a=E[e].min,n=parseInt(t);if(n<a)return window.alert("Product "+E[e].name+" Has Invalid Quantity, Must be at least "+E[e].min),!1;if(n>0){var r=Math.ceil(n/a)*a;if(r!=n){var l=Math.floor(n/a)*a;return window.alert("Product "+E[e].name+" Has Invalid Quantity, try "+l+" or "+r),!1}}return!0}},H=function(e,t,a){var n=S.slice();if(""!=n[t].product){if(n[t][e]=a.target.value,"price"===e){var r=E[n[t].product].price,l=isNaN(a.target.value)?1:a.target.value;n[t].profitability=l>r?"great":l>=.9*r?"good":"bad"}x(n)}else window.alert("No Product Selected")};return r.a.createElement("div",{className:"sale-form-main form-main"},r.a.createElement("div",{className:"form-header"},r.a.createElement("h2",null,"Sale"),r.a.createElement("h4",null,"Total: ",o.formatUSD.format(j.total))),r.a.createElement("div",{className:"sale-form-content form-content"},r.a.createElement("div",null,r.a.createElement(P,{name:"customer",label:"Customer",value:j.customer,options:l,divClass:"form-content-1",onChange:function(e){return function(e){var t=Object.assign({},j);t.customer=e.target.value,O(t)}(e)}}),r.a.createElement(p,{name:"Add Product",color:"green",divClass:"form-content-2",click:function(){return function(){var e=S.slice();e.unshift({profitability:"none",product:"",price:"",qtd:""}),x(e)}()}})),r.a.createElement("div",{className:"sale-products"},S.map((function(e,t){return r.a.createElement("div",{key:t,className:"sale-item"},r.a.createElement("div",null,r.a.createElement("span",null,r.a.createElement("b",null,"Total:")," ",o.formatUSD.format(e.price*e.qtd)),r.a.createElement("span",null,r.a.createElement("b",null,"Min Qtd:")," ",function(e){return S[e]&&""!=S[e].product?E[S[e].product].min:"1"}(t)),r.a.createElement("div",null,r.a.createElement("span",null,r.a.createElement("b",null,"Profitability:")," "),r.a.createElement("span",{className:"proft "+e.profitability},e.profitability.toUpperCase()))),r.a.createElement(P,{name:"product",label:"Product",value:e.product,options:d,onChange:function(e){return function(e,t){var a=S.slice();a[e].product=t.target.value,a[e].price=E[t.target.value].price,a[e].qtd=E[t.target.value].min,a[e].profitability="good",x(a)}(t,e)}}),r.a.createElement(v,{type:"number",id:e.product,min:"0",name:"qtd",label:"Quantity",value:e.qtd,placeHolder:"Quantity",onBlur:function(e){return I(e.target.id,e.target.value)},onChange:function(e){return H("qtd",t,e)}}),r.a.createElement(v,{type:"number",min:"0",name:"price",label:"Sell Price",value:e.price,placeHolder:"Sell Price",onChange:function(e){return H("price",t,e)}}),r.a.createElement(p,{color:"red tiny",click:function(){return function(e){var t=S.slice();delete t[e],x(t)}(t)}},r.a.createElement(i.a,{className:"nav-icon",icon:"trash-alt"})))})))),r.a.createElement("div",{className:"form-footer"},r.a.createElement("div",{className:"form-buttons"},r.a.createElement(p,{name:"Cancel",color:"red",click:function(){return window.location.href=Object(o.makePath)(["sale"])}}),r.a.createElement(p,{name:"Confirm",color:"green",submit:"1",click:function(){return function(){var t={products:[]};if(j.customer.length<1)window.alert("Customer is required");else if(t.customer=j.customer,j.total<=0)window.alert("Sale Total must be greater than Zero");else if(S.length<1)window.alert("Sale must have at least one product");else{var a=!1,n=!0,r=!1,l=void 0;try{for(var c,i=S[Symbol.iterator]();!(n=(c=i.next()).done);n=!0){var u=c.value;if(u.product&&E[u.product]){if(isNaN(u.qtd)){window.alert("Product "+E[u.product].name+" Has Invalid Quantity, Must be at least "+E[u.product].min),a=!0;break}if(!["good","great"].includes(u.profitability)){window.alert("Product "+E[u.product].name+" Has Invalid Profitability, Increase the Sell Price"),a=!0;break}if(!I(u.product,u.qtd))break;t.products.push(u)}}}catch(m){r=!0,l=m}finally{try{n||null==i.return||i.return()}finally{if(r)throw l}}a||(t.products.length<1?window.alert("Sale must have at least one product"):f.a.post(Object(o.makePath)(["sale","edit",e.id],"back"),t).then((function(e){200===e.status?e.data.status?(window.alert("Sale successfully updated"),window.location.href=Object(o.makePath)(["sale"])):window.alert(e.data.msg):window.alert("Connection Error")})))}}()}}))))},C=function(e){var t=Object(n.useState)([]),a=Object(s.a)(t,2),l=a[0],c=a[1],i=Object(n.useState)([]),u=Object(s.a)(i,2),m=u[0],d=u[1],b=Object(n.useState)({customer:"",total:0}),h=Object(s.a)(b,2),w=h[0],E=h[1],y=Object(n.useState)([{profitability:"none",product:"",price:"",qtd:""}]),g=Object(s.a)(y,2),k=g[0],j=g[1];Object(n.useEffect)((function(){l&&0!=l.length||(f.a.get(Object(o.makePath)(["customer"],"back")).then((function(e){if(200===e.status){var t=[{value:"",name:"None Selected"}];if(e.data){var a=!0,n=!1,r=void 0;try{for(var l,i=e.data[Symbol.iterator]();!(a=(l=i.next()).done);a=!0){var u=l.value;t.push({value:u._id,name:u.fname+" "+u.lname})}}catch(m){n=!0,r=m}finally{try{a||null==i.return||i.return()}finally{if(n)throw r}}c(t)}else window.alert("No Registered Customers"),window.location.href=Object(o.makePath)(["sale"])}else window.alert("No Registered Customers"),window.location.href=Object(o.makePath)(["sale"])})),f.a.get(Object(o.makePath)(["product"],"back")).then((function(t){if(200===t.status){var a=[{value:"",name:"None Selected"}],n={};if(t.data){var r=!0,l=!1,c=void 0;try{for(var i,u=t.data[Symbol.iterator]();!(r=(i=u.next()).done);r=!0){var m=i.value;a.push({value:m._id,name:m.name}),n[m._id]=m}}catch(s){l=!0,c=s}finally{try{r||null==u.return||u.return()}finally{if(l)throw c}}d(a),e.id?f.a.get(Object(o.makePath)(["sale","search",e.id],"back")).then((function(e){200===e.status?e.data.customer?(E({customer:e.data.customer,total:e.data.total}),j(e.data.products)):(window.alert("Invalid Sale"),window.location.href=Object(o.makePath)(["sale"])):(window.alert("Connection Error"),window.location.href=Object(o.makePath)(["sale"]))})):(window.alert("Invalid Sale"),window.location.href=Object(o.makePath)(["sale"]))}else window.alert("No Registered Products"),window.location.href=Object(o.makePath)(["sale"])}else window.alert("No Registered Products"),window.location.href=Object(o.makePath)(["sale"])})))}),[]);return r.a.createElement("div",{className:"sale-form-main form-main"},r.a.createElement("div",{className:"form-header"},r.a.createElement("h2",null,"Sale"),r.a.createElement("h4",null,"Total: ",o.formatUSD.format(function(){Object.assign({},w);var e=0;return k.forEach((function(t){["",0].includes(t.price)||["",0].includes(t.qtd)||(e+=t.price*t.qtd)})),e}()))),r.a.createElement("div",{className:"sale-form-content form-content"},r.a.createElement("div",null,r.a.createElement(P,{view:"1",name:"customer",label:"Customer",value:w.customer,options:l,divClass:"form-content-1"}),r.a.createElement("div",null)),r.a.createElement("div",{className:"sale-products"},k.map((function(e,t){return r.a.createElement("div",{key:t,className:"sale-item"},r.a.createElement("div",null,r.a.createElement("span",null,r.a.createElement("b",null,"Total:")," ",o.formatUSD.format(e.price*e.qtd)),r.a.createElement("span",null),r.a.createElement("div",null,r.a.createElement("span",null,r.a.createElement("b",null,"Profitability:")," "),r.a.createElement("span",{className:"proft "+e.profitability},e.profitability.toUpperCase()))),r.a.createElement(P,{view:"1",name:"product",label:"Product",value:e.product,options:m}),r.a.createElement(v,{view:"1",type:"number",id:e.product,min:"0",name:"qtd",label:"Quantity",value:e.qtd,placeHolder:"Quantity"}),r.a.createElement(v,{view:"1",type:"number",min:"0",name:"price",label:"Sell Price",value:e.price,placeHolder:"Sell Price"}),r.a.createElement("div",null))})))),r.a.createElement("div",{className:"form-footer"},r.a.createElement("div",{className:"form-buttons"},r.a.createElement(p,{name:"Confirm",color:"green",submit:"1",click:function(){return window.location.href=Object(o.makePath)(["sale"])}}))))},N=function(){var e=Object(n.useState)([]),t=Object(s.a)(e,2),a=t[0],l=t[1];Object(n.useEffect)((function(){return c()}),[]);var c=function(){f.a.get(Object(o.makePath)(["sale"],"back")).then((function(e){200===e.status&&l(e.data)}))},i=function(e){var t=0,a=!0,n=!1,r=void 0;try{for(var l,c=e[Symbol.iterator]();!(a=(l=c.next()).done);a=!0){var i=l.value;t+=i.qtd*i.price}}catch(u){n=!0,r=u}finally{try{a||null==c.return||c.return()}finally{if(n)throw r}}return o.formatUSD.format(t)};return r.a.createElement("div",{className:"list-main"},r.a.createElement("div",{className:"list-header"},r.a.createElement("h2",null,"Sales"),r.a.createElement(p,{name:"New",color:"green",click:function(){return window.location.href=Object(o.makePath)(["sale","add"])}})),r.a.createElement("div",{className:"list-content"},r.a.createElement("ul",null,a.map((function(e){return r.a.createElement(y,{key:e._id,name:e.customer.fname+" "+e.customer.lname,subName:"Total: "+i(e.products),url:"sale",id:e._id,onDelete:function(e){return function(e){window.confirm("Are you sure you want to delete this sale?")&&f.a.delete(Object(o.makePath)(["sale","delete",e],"back")).then((function(e){200===e.status&&c()}))}(e)}})})))))},S=function(e){switch(e.action){case"add":return r.a.createElement(j,null);case"edit":return r.a.createElement(O,{id:e.id});case"view":return r.a.createElement(C,{id:e.id});default:return r.a.createElement(N,null)}},x=function(){var e=Object(n.useState)([{id:"cpf",name:"cpf",label:"Customer CPF",type:"text",min:"11",max:"11",placeHolder:"CPF",value:"",onBlur:function(e){return c(e)},onChange:function(e){return i(e)}},{id:"fname",name:"fname",label:"First Name",type:"text",min:"75",max:"75",value:"",placeHolder:"First Name",onChange:function(e){return i(e)}},{id:"lname",name:"lname",label:"Last Name",type:"text",min:"75",max:"75",value:"",placeHolder:"Last Name",onChange:function(e){return i(e)}}]),t=Object(s.a)(e,2),a=t[0],l=t[1],c=function(e){Object(o.checkCPF)(e.target.value)||window.alert("Invalid CPF")},i=function(e){var t=a.slice();t.map((function(a,n){a.id===e.target.id&&(t[n].value=e.target.value)})),l(t)},u=function(e){e.preventDefault();var t={},n=!0,r=!1,l=void 0;try{for(var c,i=a[Symbol.iterator]();!(n=(c=i.next()).done);n=!0){var u=c.value;t[u.name]=u.value}}catch(d){r=!0,l=d}finally{try{n||null==i.return||i.return()}finally{if(r)throw l}}var m,s=(m=t,Object(o.checkCPF)(m.cpf)?m.fname.length<3||m.fname.length>50?{status:!1,msg:"Invalid First Name"}:m.lname.length<3||m.lname.length>50?{status:!1,msg:"Invalid Last Name"}:{status:!0}:{status:!1,msg:"Invalid CPF"});if(!s.status)return window.alert(s.msg),!1;f.a.post(Object(o.makePath)(["customer","add"],"back"),t).then((function(e){200===e.status?e.data.status?(window.alert("Customer successfully registered"),window.location.href=Object(o.makePath)(["customer"])):window.alert(e.data.msg):window.alert("Connection Error")}))};return r.a.createElement(b,{name:"Customer",onCancel:function(){return window.location.href=Object(o.makePath)(["customer"])},onSubmit:function(e){return u(e)}},a.map((function(e){return r.a.createElement(v,{key:e.id,id:e.id,name:e.name,label:e.label,type:e.type,min:e.min,max:e.max,placeHolder:e.placeHolder,value:e.value,onBlur:e.onBlur,onChange:e.onChange})})))},I=function(e){var t=Object(n.useState)([{id:"cpf",name:"cpf",label:"Customer CPF",type:"text",min:"11",max:"11",placeHolder:"CPF",value:"",onBlur:function(e){return i(e)},onChange:function(e){return u(e)}},{id:"fname",name:"fname",label:"First Name",type:"text",min:"75",max:"75",value:"",placeHolder:"First Name",onChange:function(e){return u(e)}},{id:"lname",name:"lname",label:"Last Name",type:"text",min:"75",max:"75",value:"",placeHolder:"Last Name",onChange:function(e){return u(e)}}]),a=Object(s.a)(t,2),l=a[0],c=a[1];Object(n.useEffect)((function(){e.id?f.a.get(Object(o.makePath)(["customer","search",e.id],"back")).then((function(e){if(200===e.status)if(e.data.cpf){var t=l.slice();t.map((function(a,n){t[n].value=e.data[a.name]})),c(t)}else window.alert("Invalid Customer"),window.location.href=Object(o.makePath)(["customer"]);else window.alert("Connection Error"),window.location.href=Object(o.makePath)(["customer"])})):(window.alert("Invalid Customer"),window.location.href=Object(o.makePath)(["customer"]))}),[]);var i=function(e){Object(o.checkCPF)(e.target.value)||window.alert("Invalid CPF")},u=function(e){var t=l.slice();t.map((function(a,n){a.id===e.target.id&&(t[n].value=e.target.value)})),c(t)},m=function(t){t.preventDefault();var a={};l.map((function(e){return a[e.name]=e.value}));var n,r=(n=a,Object(o.checkCPF)(n.cpf)?n.fname.length<3||n.fname.length>50?{status:!1,field:"fname",msg:"Invalid First Name"}:n.lname.length<3||n.lname.length>50?{status:!1,field:"lname",msg:"Invalid Last Name"}:{status:!0}:{status:!1,field:"cpf",msg:"Invalid CPF"});if(!r.status)return window.alert(r.msg),!1;f.a.post(Object(o.makePath)(["customer","edit",e.id],"back"),a).then((function(e){200===e.status?e.data.status?(window.alert("Customer successfully updated"),window.location.href=Object(o.makePath)(["customer"])):window.alert(e.data.msg):window.alert("Connection Error")}))};return r.a.createElement(b,{name:"Customer",onCancel:function(){return window.location.href=Object(o.makePath)(["customer"])},onSubmit:function(e){return m(e)}},l.map((function(e){return r.a.createElement(v,{key:e.id,id:e.id,name:e.name,label:e.label,type:e.type,min:e.min,max:e.max,placeHolder:e.placeHolder,value:e.value,onBlur:e.onBlur,onChange:e.onChange})})))},H=function(e){var t=Object(n.useState)([{id:"cpf",name:"cpf",label:"Customer CPF",type:"text",min:"11",max:"11",placeHolder:"CPF",value:""},{id:"fname",name:"fname",label:"First Name",type:"text",min:"75",max:"75",value:"",placeHolder:"First Name"},{id:"lname",name:"lname",label:"Last Name",type:"text",min:"75",max:"75",value:"",placeHolder:"Last Name"}]),a=Object(s.a)(t,2),l=a[0],c=a[1];return Object(n.useEffect)((function(){e.id?f.a.get(Object(o.makePath)(["customer","search",e.id],"back")).then((function(e){if(200===e.status)if(e.data.cpf){var t=l.slice();t.map((function(a,n){t[n].value=e.data[a.name]})),console.log(t),c(t)}else window.alert("Invalid Customer"),window.location.href=Object(o.makePath)(["customer"]);else window.alert("Connection Error"),window.location.href=Object(o.makePath)(["customer"])})):(window.alert("Invalid Customer"),window.location.href=Object(o.makePath)(["customer"]))}),[]),r.a.createElement(b,{name:"Customer",onSubmit:function(){return window.location.href=Object(o.makePath)(["customer"])}},l.map((function(e){return r.a.createElement(v,{view:"1",key:e.id,id:e.id,name:e.name,label:e.label,type:e.type,placeHolder:e.placeHolder,value:e.value})})))},F=function(){var e=Object(n.useState)([]),t=Object(s.a)(e,2),a=t[0],l=t[1];Object(n.useEffect)((function(){return c()}),[]);var c=function(){f.a.get(Object(o.makePath)(["customer"],"back")).then((function(e){200===e.status&&l(e.data)}))};return r.a.createElement("div",{className:"list-main"},r.a.createElement("div",{className:"list-header"},r.a.createElement("h2",null,"Customers"),r.a.createElement(p,{name:"New",color:"green",click:function(){return window.location.href=Object(o.makePath)(["customer","add"])}})),r.a.createElement("div",{className:"list-content"},r.a.createElement("ul",null,a.map((function(e){return r.a.createElement(y,{key:e._id,name:e.fname+" "+e.lname,subName:"CPF: "+Object(o.formatCPF)(e.cpf),url:"customer",id:e._id,onDelete:function(e){return function(e){window.confirm("Are you sure you want to delete this customer?")&&f.a.delete(Object(o.makePath)(["customer","delete",e],"back")).then((function(e){200===e.status&&c()}))}(e)}})})))))},q=function(e){switch(e.action){case"add":return r.a.createElement(x,null);case"edit":return r.a.createElement(I,{id:e.id});case"view":return r.a.createElement(H,{id:e.id});default:return r.a.createElement(F,null)}},Q=function(){var e=Object(n.useState)({customer:0,product:0,sale:0}),t=Object(s.a)(e,2),a=t[0],l=t[1];return Object(n.useEffect)((function(){f.a.get(Object(o.makePath)([],"back")).then((function(e){200===e.status&&l(e.data)}))}),[]),r.a.createElement("p",null,JSON.stringify(a))},D=(a(53),a(8)),U=a(7);D.b.add(U.c,U.e,U.a,U.b,U.d);var M=function(){var e,t=window.location.pathname.split("/");switch(t[1]){case"product":e=r.a.createElement(k,{action:t[2],id:t[3]});break;case"sale":e=r.a.createElement(S,{action:t[2],id:t[3]});break;case"customer":e=r.a.createElement(q,{action:t[2],id:t[3]});break;case"":default:e=r.a.createElement(Q,null)}return r.a.createElement("div",null,r.a.createElement(m,null),r.a.createElement("div",{className:"container"},e))};c.a.render(r.a.createElement(M,null),document.getElementById("root"))}},[[22,1,2]]]);
//# sourceMappingURL=main.688a678c.chunk.js.map